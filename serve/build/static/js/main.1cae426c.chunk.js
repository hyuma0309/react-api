(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{33:function(e,t,n){e.exports=n(62)},38:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),c=n.n(i),s=(n(38),n(19)),l=n(3),o=n.n(l),u=n(12),p=n(8),d=n(9),m=n(11),h=n(10),f=n(16),v=n.n(f),b=v.a.create({baseURL:"http://localhost:8080/api/products",headers:{"Content-Type":"application/json"},responseType:"json"}),E=function(e){return{headers:{Authorization:"Bearer:".concat(e)}}},g=function(e){return b.get("/",E(e))},k=function(e,t,n,a){return b.post("/",{title:e,description:t,price:n},E(a))},y=function(e,t,n){return b.put("/".concat(e),t,E(n))},w=function(e,t){return b.delete("/".concat(e),E(t))},x=function(e,t,n){return b.patch("/".concat(e)+"/images",t,E(n))},j=function(e,t,n){return v.a.get("http://localhost:8080/api/products"+"/".concat(e)+"/images"+"/".concat(t),{headers:{Authorization:"Bearer:".concat(n)},responseType:"arraybuffer"}).then((function(e){var t=btoa(new Uint8Array(e.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""));return"data:".concat(e.headers["content-type"].toLowerCase(),";base64,").concat(t)}))},O=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t=[],n=e.target.form,r=n.title.value,i=n.description.value,c=n.price.value,s=document.getElementById("valid"),l=r.length,o=i.length,u=Number(c);(0===l||10<l)&&t.push("\u30bf\u30a4\u30c8\u30eb\u306f1\u301c10\u5b57\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),(0===o||500<o)&&t.push("\u8aac\u660e\u306f1\u301c500\u5b57\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),(!Number.isInteger(u)||u<1||u>1e6)&&t.push("\u4fa1\u683c\u306f1\u5186\u4ee5\u4e0a100\u4e07\u5186\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),0===t.length?(a.props.add(r,i,c),a.setState({messages:[]}),n.reset()):(s.disabled=!0,a.setState({messages:t}))},a.state={messages:[]},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.messages.map((function(e){return r.a.createElement("ul",{key:e},r.a.createElement("li",null,e))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"ProductForm"),r.a.createElement("form",null,r.a.createElement("label",null,"\u5546\u54c1\u540d"),r.a.createElement("input",{type:"text",id:"title",placeholder:"1\u301c10\u5b57",name:"title"}),r.a.createElement("label",null,"\u8aac\u660e"),r.a.createElement("input",{type:"text",id:"description",name:"description",placeholder:"1\u301c500\u5b57"}),r.a.createElement("label",null,"\u4fa1\u683c"),r.a.createElement("input",{type:"number",id:"price",name:"price",placeholder:"1\u5186\u4ee5\u4e0a100\u4e07\u5186\u4ee5\u4e0b",min:"1"}),r.a.createElement("button",{type:"submit",id:"valid",onClick:this.onSubmit},"\u8ffd\u52a0")),e)}}]),n}(r.a.Component),C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).isValid=function(e,t){t.preventDefault();var n=[],r=t.target.form,i=r.title.value,c=r.description.value,s=r.price.value,l=document.getElementById("validate"),o=i.length,u=c.length,p=Number(s);(0===o||10<o)&&n.push("\u30bf\u30a4\u30c8\u30eb\u306f1\u301c10\u5b57\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),(0===u||500<u)&&n.push("\u8aac\u660e\u306f1\u301c500\u5b57\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),(!Number.isInteger(p)||p<1||p>1e6)&&n.push("\u4fa1\u683c\u306f1\u5186\u4ee5\u4e0a100\u4e07\u5186\u4ee5\u4e0b\u3067\u5165\u529b\u3057\u3066\u4e0b\u3055\u3044"),0===n.length?(a.props.edit(e,t),a.setState({messages:[]})):(l.disabled=!0,a.setState({messages:n}))},a.state={messages:[]},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state.messages.map((function(e){return r.a.createElement("ul",{key:e},r.a.createElement("li",null,e))}));return r.a.createElement("div",null,r.a.createElement("form",{id:"view"},r.a.createElement("label",null,"\u30bf\u30a4\u30c8\u30eb\uff1a"),r.a.createElement("input",{name:"title",type:"text",defaultValue:this.props.product.title}),r.a.createElement("label",null,"\u8aac\u660e"),r.a.createElement("input",{name:"description",type:"text",defaultValue:this.props.product.description}),r.a.createElement("label",null,"\u4fa1\u683c"),r.a.createElement("input",{name:"price",type:"number",defaultValue:this.props.product.price,min:"1"}),r.a.createElement("button",{type:"submit",id:"validate",onClick:function(t){return e.isValid(e.props.id,t)}},"\u66f4\u65b0")),t)}}]),n}(r.a.Component),S=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).delete=function(t){e.props.delete(t)},e.handleFileChange=function(t,n,a){a.preventDefault();var r=new FormData,i=a.target.files[0];r.append("productImage",i),e.props.file(t,r,n)},e.handleButton=function(t,n){n.preventDefault(),e.props.editForm(t)},e.edit=function(t,n){n.preventDefault();var a=n.target.form,r={title:a.title.value,description:a.description.value,price:a.price.value};e.props.edit(t,r)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.products.map((function(t){if(!0===t.isVisible)return r.a.createElement("ul",{key:t.id},r.a.createElement("li",null,t.title),r.a.createElement("li",null,t.description),r.a.createElement("li",null,t.price,"\u5186"),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(){return e.delete(t.id)}},"\u524a\u9664"),r.a.createElement("button",{type:"submit",onClick:function(n){return e.handleButton(t.id,n)}},"\u7de8\u96c6")),r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:function(n){return e.handleFileChange(t.id,t.imagePath,n)}})),"image"in t?r.a.createElement("img",{src:t.image}):r.a.createElement("img",{src:"http://design-ec.com/d/e_others_50/m_e_others_501.png"}),t.editIsVisible&&r.a.createElement(C,{product:t,edit:e.edit,id:t.id}))})),n=this.props.products.filter((function(e){return!0===e.isVisible}));return r.a.createElement("div",null,r.a.createElement("h1",null,"\u5546\u54c1\u30ea\u30b9\u30c8"),t,r.a.createElement("h3",null,"\u5546\u54c1\u4ef6\u6570\u306f",n.length,"\u4ef6\u3067\u3059"))}}]),n}(r.a.Component),I=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onClickSearch=function(t){t.preventDefault();var n=t.target.form.word.value;e.props.search(n)},e}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("label",null,"\u30bf\u30a4\u30c8\u30eb\u3067\u691c\u7d22"),r.a.createElement("input",{type:"text",name:"word"}),r.a.createElement("button",{type:"submit",onClick:this.onClickSearch},"\u691c\u7d22"))}}]),n}(r.a.Component),T=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleInputChange=function(e){a.setState({apiToken:e.target.value})},a.getErrorResponse=function(e){e.response?400===e.response.status||401===e.response.status||500===e.response.status?alert(e.response.data.detail):alert("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\uff01"):alert("\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\uff01")},a.authentication=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=a.state.apiToken,e.next=5,g(n);case 5:r=e.sent,a.setState({products:r.data}),a.setState({message:"\u8a8d\u8a3c\u306b\u6210\u529f\u3057\u307e\u3057\u305f"}),window.localStorage.setItem("apiToken",n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a.getErrorResponse(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.add=function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var i,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.state.apiToken,c=a.state.products.slice(),e.prev=2,e.next=5,k(t,n,r,i);case 5:s=e.sent,l={id:s.data.id,title:s.data.title,description:s.data.description,price:s.data.price,isVisible:!0},c.push(l),a.setState({products:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.getErrorResponse(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),a.delete=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.apiToken,r=a.state.products,e.prev=2,i=r.findIndex((function(e){return e.id===t})),a.state.products.splice(i,1),e.next=7,w(t,n);case 7:a.setState({products:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a.getErrorResponse(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),a.editForm=function(e){var t=a.state.products,n=t.findIndex((function(t){return t.id===e}));t[n].editIsVisible=!0,a.setState({products:t})},a.edit=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.state.apiToken,i=a.state.products,c=i.findIndex((function(e){return e.id===t})),s={id:t,title:n.title,description:n.description,price:n.price,isVisible:!0},i[c]=s,e.next=8,y(t,n,r);case 8:a.setState({products:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a.getErrorResponse(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),a.file=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,i,c,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.apiToken,i=a.state.products.slice(),e.prev=2,e.next=5,x(t,n,r);case 5:return c=e.sent,e.next=8,j(c.data.id,c.data.imagePath,a.state.apiToken);case 8:l=e.sent,u=i.findIndex((function(e){return e.id===t})),i[u]=Object(s.a)(Object(s.a)({},i[u]),{},{image:l}),a.setState({products:i}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),a.getErrorResponse(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),a.search=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.products,r=a.state.apiToken,e.next=4,Promise.all(n.map(function(){var e=Object(u.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.title.includes(t),n.title.includes(t)?n.isVisible=!0:n.isVisible=!1,e.next=4,j(n.id,n.imagePath,r);case 4:a=e.sent,n.image=a;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:a.setState({products:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={apiToken:"",message:"",products:[],response:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=window.localStorage.getItem("apiToken");this.setState({apiToken:e})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h1",null,"API\u30c8\u30fc\u30af\u30f3"),r.a.createElement("input",{type:"text",placeholder:"\u30c8\u30fc\u30af\u30f3\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044",onChange:this.handleInputChange}),r.a.createElement("button",{type:"submit",onClick:this.authentication},"Token\u3092\u53d6\u5f97")),r.a.createElement("p",null,this.state.message),r.a.createElement(O,{add:this.add}),r.a.createElement(S,{products:this.state.products,delete:this.delete,edit:this.edit,editForm:this.editForm,file:this.file}),r.a.createElement(I,{search:this.search}))}}]),n}(r.a.Component),V=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Not Found"),r.a.createElement("p",null,"\u304a\u63a2\u3057\u306e\u30da\u30fc\u30b8\u306f\u5b58\u5728\u3057\u307e\u305b\u3093"))},F=n(31),D=n(1);var B=function(){return r.a.createElement(F.a,null,r.a.createElement(D.c,null,r.a.createElement(D.a,{exact:!0,path:"/",render:function(){return r.a.createElement(T,null)}}),r.a.createElement(D.a,{component:V})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.1cae426c.chunk.js.map