{"version":3,"sources":["api/ProductApi.js","components/ProductForm.js","components/EditForm.js","components/ProductList.js","components/SearchForm.js","containers/ProductContainer.js","components/404.js","App.js","serviceWorker.js","index.js"],"names":["productApi","axios","create","baseURL","REACT_APP_HOST","headers","responseType","generateHeader","apiToken","Authorization","get","title","description","price","post","id","editForm","put","delete","imagePath","patch","then","response","image","btoa","Uint8Array","data","reduce","byte","String","fromCharCode","toLowerCase","ProductForm","props","onSubmit","e","preventDefault","messages","form","target","value","valid","document","getElementById","titleLength","length","descLength","priceNumber","Number","push","isInteger","add","setState","reset","disabled","state","messageList","this","map","message","key","type","placeholder","name","min","onClick","React","Component","EditForm","isValid","desc","edit","defaultValue","product","ProductList","handleFileChange","FormData","file","files","append","handleButton","editProduct","products","isVisible","onChange","src","editIsVisible","searchItem","filter","SearchForm","onClickSearch","word","search","ProductContainer","handleInputChange","getErrorResponse","status","alert","detail","authentication","a","window","localStorage","setItem","newProducts","slice","deleteIndex","findIndex","splice","formIndex","editIndex","fileIndex","Promise","all","includes","getItem","NotFound","App","exact","path","render","component","Boolean","location","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.1cae426c.chunk.js","sourcesContent":["import axios from 'axios';\n\n/* APIサーバーのURL */\nconst REACT_APP_HOST = process.env.REACT_APP_HOST; //http://localhost:8080/\n\nconst productApi = axios.create({\n  baseURL: REACT_APP_HOST + 'api/products',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  responseType: 'json',\n});\n\n/**\n * アクセスに必要なヘッダーを作成します\n */\nconst generateHeader = apiToken => ({\n  headers: { Authorization: `Bearer:${apiToken}` },\n});\n\n/**\n * 商品情報一覧を取得\n */\nconst login = apiToken => {\n  const products = productApi.get('/', generateHeader(apiToken));\n  return products;\n};\n\n/**\n * 商品を追加\n */\nconst add = (title, description, price, apiToken) => {\n  const product = productApi.post(\n    '/',\n    {\n      title: title,\n      description: description,\n      price: price,\n    },\n    generateHeader(apiToken)\n  );\n  return product;\n};\n\n/**\n * 商品を更新\n */\nconst update = (id, editForm, apiToken) => {\n  const product = productApi.put(`/${id}`, editForm, generateHeader(apiToken));\n  return product;\n};\n\n/**\n * 商品を削除\n */\nconst $delete = (id, apiToken) => {\n  return productApi.delete(`/${id}`, generateHeader(apiToken));\n};\n\n/**\n *  画像アップロード\n */\nconst image = (id, imagePath, apiToken) => {\n  return productApi.patch(`/${id}` + `/images`, imagePath, generateHeader(apiToken));\n};\n\n/**\n * 画像を取得\n */\nconst getImage = (id, imagePath, apiToken) => {\n  return axios\n    .get(REACT_APP_HOST + 'api/products' + `/${id}` + `/images` + `/${imagePath}`, {\n      headers: {\n        Authorization: `Bearer:${apiToken}`,\n      },\n      responseType: 'arraybuffer',\n    })\n    .then(response => {\n      let image = btoa(\n        new Uint8Array(response.data).reduce((data, byte) => data + String.fromCharCode(byte), '')\n      );\n      return `data:${response.headers['content-type'].toLowerCase()};base64,${image}`;\n    });\n};\n\nexport default {\n  login,\n  add,\n  update,\n  delete: $delete,\n  image,\n  getImage,\n};\n","import React from 'react';\n\nexport default class ProductForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: [],\n    };\n  }\n\n  onSubmit = e => {\n    e.preventDefault();\n    const messages = [];\n    const form = e.target.form;\n    const title = form.title.value;\n    const description = form.description.value;\n    const price = form.price.value;\n    const valid = document.getElementById('valid');\n\n    const titleLength = title.length;\n    const descLength = description.length;\n    const priceNumber = Number(price);\n\n    if (titleLength === 0 || 10 < titleLength) {\n      messages.push('タイトルは1〜10字で入力して下さい');\n    }\n    if (descLength === 0 || 500 < descLength) {\n      messages.push('説明は1〜500字で入力して下さい');\n    }\n    if (!Number.isInteger(priceNumber) || priceNumber < 1 || priceNumber > 1000000) {\n      messages.push('価格は1円以上100万円以下で入力して下さい');\n    }\n    if (messages.length === 0) {\n      this.props.add(title, description, price);\n      this.setState({ messages: [] });\n      form.reset();\n    } else {\n      valid.disabled = true;\n      this.setState({ messages: messages });\n    }\n  };\n\n  render() {\n    const messageList = this.state.messages.map(message => {\n      return (\n        <ul key={message}>\n          <li>{message}</li>\n        </ul>\n      );\n    });\n\n    return (\n      <div>\n        <h1>ProductForm</h1>\n        <form>\n          <label>商品名</label>\n          <input type=\"text\" id=\"title\" placeholder=\"1〜10字\" name=\"title\" />\n          <label>説明</label>\n          <input type=\"text\" id=\"description\" name=\"description\" placeholder=\"1〜500字\" />\n          <label>価格</label>\n          <input type=\"number\" id=\"price\" name=\"price\" placeholder=\"1円以上100万円以下\" min=\"1\" />\n          <button type=\"submit\" id=\"valid\" onClick={this.onSubmit}>\n            追加\n          </button>\n        </form>\n        {messageList}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport default class EditForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: [],\n    };\n  }\n\n  isValid = (id, e) => {\n    e.preventDefault();\n    const messages = [];\n    const form = e.target.form;\n    const title = form.title.value;\n    const desc = form.description.value;\n    const price = form.price.value;\n    const valid = document.getElementById('validate');\n\n    const titleLength = title.length;\n    const descLength = desc.length;\n    const priceNumber = Number(price);\n\n    if (titleLength === 0 || 10 < titleLength) {\n      messages.push('タイトルは1〜10字で入力して下さい');\n    }\n    if (descLength === 0 || 500 < descLength) {\n      messages.push('説明は1〜500字で入力して下さい');\n    }\n    if (!Number.isInteger(priceNumber) || priceNumber < 1 || priceNumber > 1000000) {\n      messages.push('価格は1円以上100万円以下で入力して下さい');\n    }\n\n    if (messages.length === 0) {\n      this.props.edit(id, e);\n      this.setState({ messages: [] });\n    } else {\n      valid.disabled = true;\n      this.setState({ messages: messages });\n    }\n  };\n\n  render() {\n    const messageList = this.state.messages.map(message => {\n      return (\n        <ul key={message}>\n          <li>{message}</li>\n        </ul>\n      );\n    });\n\n    return (\n      <div>\n        <form id=\"view\">\n          <label>タイトル：</label>\n          <input name=\"title\" type=\"text\" defaultValue={this.props.product.title}></input>\n          <label>説明</label>\n          <input name=\"description\" type=\"text\" defaultValue={this.props.product.description}></input>\n          <label>価格</label>\n          <input name=\"price\" type=\"number\" defaultValue={this.props.product.price} min=\"1\"></input>\n          <button type=\"submit\" id=\"validate\" onClick={e => this.isValid(this.props.id, e)}>\n            更新\n          </button>\n        </form>\n        {messageList}\n      </div>\n    );\n  }\n}","import React from 'react';\nimport productApi from '../api/ProductApi';\nimport EditForm from './EditForm';\n\nexport default class ProductList extends React.Component {\n  //商品の削除\n  delete = id => {\n    this.props.delete(id);\n  };\n\n  //画像ファイルの読み取り\n  handleFileChange = (id, imagePath, e) => {\n    e.preventDefault();\n    let data = new FormData();\n    let file = e.target.files[0];\n    data.append('productImage', file);\n    this.props.file(id, data, imagePath);\n  };\n\n\n  //フォームの表示\n  handleButton = (id, e) => {\n    e.preventDefault();\n    this.props.editForm(id);\n  };\n\n  edit = (id, e) => {\n    e.preventDefault();\n    const form = e.target.form;\n    const title = form.title.value;\n    const description = form.description.value;\n    const price = form.price.value;\n    const editProduct = {\n      title: title,\n      description: description,\n      price: price,\n    };\n    this.props.edit(id, editProduct);\n  };\n\n  render() {\n    const product = this.props.products.map(product => {\n      if (product.isVisible === true) {\n        return (\n          <ul key={product.id}>\n            <li>{product.title}</li>\n            <li>{product.description}</li>\n            <li>{product.price}円</li>\n\n            <div>\n              <button type=\"submit\" onClick={() => this.delete(product.id)}>\n                削除\n              </button>\n              <button type=\"submit\" onClick={e => this.handleButton(product.id, e)}>\n                編集\n              </button>\n            </div>\n\n            <div>\n              <input\n                type=\"file\"\n                onChange={e => this.handleFileChange(product.id, product.imagePath, e)}\n              />\n            </div>\n\n            {'image' in product ? (\n             <img src={product.image} />\n            ) : (\n              <img src={'http://design-ec.com/d/e_others_50/m_e_others_501.png'} />\n            )}\n            {product.editIsVisible && (\n              <EditForm product={product} edit={this.edit} id={product.id} />\n            )}\n          </ul>\n        );\n      }\n    });\n    const searchItem = this.props.products.filter(function(value) {\n      return value.isVisible === true;\n    });\n\n    return (\n      <div>\n        <h1>商品リスト</h1>\n        {product}\n        <h3>商品件数は{searchItem.length}件です</h3>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nexport default class SearchForm extends React.Component {\n  onClickSearch = e => {\n    e.preventDefault();\n    const word = e.target.form.word.value;\n    this.props.search(word);\n  };\n\n  render() {\n    return (\n      <form>\n        <label>タイトルで検索</label>\n        <input type=\"text\" name=\"word\" />\n        <button type=\"submit\" onClick={this.onClickSearch}>\n          検索\n        </button>\n      </form>\n    );\n  }\n}\n","import React from 'react';\nimport productApi from '../api/ProductApi';\nimport ProductForm from '../components/ProductForm';\nimport ProductList from '../components/ProductList';\nimport SearchForm from '../components/SearchForm';\n\nexport default class ProductContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiToken: '',\n      message: '',\n      products: [],\n      response: '',\n    };\n  }\n\n  componentDidMount() {\n    const apiToken = window.localStorage.getItem('apiToken');\n    this.setState({ apiToken: apiToken });\n  }\n\n  /**\n   * apiTokenの変更をstateに反映\n   * @param e イベントオブジェクト\n   */\n  handleInputChange = e => {\n    this.setState({ apiToken: e.target.value });\n  };\n\n  /**\n   *ネットワークエラー\n   * @param e イベントオブジェクト\n   */\n  getErrorResponse = e => {\n    if (!e.response) {\n      alert('ネットワークエラーが発生しました！');\n    } else if (e.response.status === 400) {\n      alert(e.response.data.detail);\n    } else if (e.response.status === 401) {\n      alert(e.response.data.detail);\n    } else if (e.response.status === 500) {\n      alert(e.response.data.detail);\n    } else {\n      alert('エラーが発生しました！');\n    }\n  };\n\n  /**\n   * トークンで認証\n   * @param e イベントオブジェクト\n   */\n  authentication = async e => {\n    try {\n      e.preventDefault();\n      const apiToken = this.state.apiToken;\n      const response = await productApi.login(apiToken);\n      this.setState({\n        products: response.data,\n      });\n      this.setState({ message: '認証に成功しました' });\n      window.localStorage.setItem('apiToken', apiToken);\n    } catch (e) {\n      this.getErrorResponse(e);\n    }\n  };\n\n  //商品の追加\n  add = async (title, description, price) => {\n    const apiToken = this.state.apiToken;\n    const newProducts = this.state.products.slice();\n    try {\n      const response = await productApi.add(title, description, price, apiToken);\n      const product = {\n        id: response.data.id,\n        title: response.data.title,\n        description: response.data.description,\n        price: response.data.price,\n        isVisible: true,\n      };\n      newProducts.push(product);\n      this.setState({ products: newProducts });\n    } catch (e) {\n      this.getErrorResponse(e);\n    }\n  };\n\n  //商品の削除\n  delete = async id => {\n    const apiToken = this.state.apiToken;\n    const products = this.state.products;\n    try {\n      //削除したい配列を取得\n      const deleteIndex = products.findIndex(product => product.id === id);\n      //配列を一つ削除\n      this.state.products.splice(deleteIndex, 1);\n      await productApi.delete(id, apiToken);\n      this.setState({ products: products });\n    } catch (e) {\n      this.getErrorResponse(e);\n    }\n  };\n\n  //編集フォームの表示\n  editForm = id => {\n    const products = this.state.products;\n    const formIndex = products.findIndex(product => product.id === id);\n    products[formIndex].editIsVisible = true;\n    this.setState({ products: products });\n  };\n\n  //商品の編集\n  edit = async (id, editProduct) => {\n    try {\n      const apiToken = this.state.apiToken;\n      const products = this.state.products;\n      //編集したい配列を取得\n      const editIndex = products.findIndex(product => product.id === id);\n      const product = {\n        id: id,\n        title: editProduct.title,\n        description: editProduct.description,\n        price: editProduct.price,\n        isVisible: true,\n      };\n      //上書きしたい要素に新しい要素を再代入\n      products[editIndex] = product;\n      await productApi.update(id, editProduct, apiToken);\n      this.setState({ products: products });\n    } catch (e) {\n      this.getErrorResponse(e);\n    }\n  };\n\n  //画像の追加\n  file = async (id, data) => {\n    const apiToken = this.state.apiToken;\n    const products = this.state.products.slice();\n    try {\n      //画像のアップロード\n      const response = await productApi.image(id, data, apiToken);\n      const image = await productApi.getImage(\n        response.data.id,\n        response.data.imagePath,\n        this.state.apiToken\n      );\n      const fileIndex = products.findIndex(product => product.id === id);\n      products[fileIndex] = { ...products[fileIndex], image };\n      this.setState({ products: products });\n    } catch (e) {\n      this.getErrorResponse(e);\n    }\n  };\n\n  //商品の検索\n  search = async word => {\n    const newProducts = this.state.products;\n    const apiToken = this.state.apiToken;\n    await Promise.all(\n      newProducts.map(async product => {\n        product.title.includes(word);\n        if (product.title.includes(word)) {\n          product.isVisible = true;\n        } else {\n          product.isVisible = false;\n        }\n        //base64に変換された画像\n        const image = await productApi.getImage(product.id, product.imagePath, apiToken);\n        product.image = image;\n      })\n    );\n    this.setState({ products: newProducts });\n  };\n\n  render() {\n    return (\n      <div>\n        <form>\n          <h1>APIトークン</h1>\n          <input\n            type=\"text\"\n            placeholder=\"トークンを入れてください\"\n            onChange={this.handleInputChange}\n          />\n          <button type=\"submit\" onClick={this.authentication}>\n            Tokenを取得\n          </button>\n        </form>\n        <p>{this.state.message}</p>\n        <ProductForm add={this.add} />\n        <ProductList\n          products={this.state.products}\n          delete={this.delete}\n          edit={this.edit}\n          editForm={this.editForm}\n          file={this.file}\n        />\n        <SearchForm search={this.search} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nconst NotFound = () => (\n  <>\n    <h1>Not Found</h1>\n    <p>お探しのページは存在しません</p>\n  </>\n);\n\nexport default NotFound;\n","import React from 'react';\nimport ProductContainer from './containers/ProductContainer';\nimport NotFound from './components/404';\nimport { BrowserRouter, Route, Switch} from 'react-router-dom';\n\n\n\nfunction App() {\n  return (\n      <BrowserRouter>\n      <Switch>\n       <Route exact path=\"/\" render={() => (<ProductContainer />)}/>\n       <Route component={NotFound} />\n       </Switch>\n       </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}